window.Socialite=function(window,document,undefined){"use strict";var uid=0,instances=[],networks={},widgets={},rstate=/^($|loaded|complete)/,euc=window.encodeURIComponent,socialite={settings:{},trim:function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")},hasClass:function(el,cn){return-1!==(" "+el.className+" ").indexOf(" "+cn+" ")},addClass:function(el,cn){socialite.hasClass(el,cn)||(el.className=""===el.className?cn:el.className+" "+cn)},removeClass:function(el,cn){el.className=socialite.trim(" "+el.className+" ".replace(" "+cn+" "," "))},extendObject:function(to,from,overwrite){for(var prop in from){var hasProp=to[prop]!==undefined;hasProp&&"object"==typeof from[prop]?socialite.extendObject(to[prop],from[prop],overwrite):(overwrite||!hasProp)&&(to[prop]=from[prop])}},getElements:function(context,cn){for(var i=0,el=[],gcn=!!context.getElementsByClassName,all=gcn?context.getElementsByClassName(cn):context.getElementsByTagName("*");i<all.length;i++)(gcn||socialite.hasClass(all[i],cn))&&el.push(all[i]);return el},getDataAttributes:function(el,noprefix,nostr){for(var i=0,str="",obj={},attr=el.attributes;i<attr.length;i++){var key=attr[i].name,val=attr[i].value;val.length&&0===key.indexOf("data-")&&(noprefix&&(key=key.substring(5)),nostr?obj[key]=val:str+=euc(key)+"="+euc(val)+"&")}return nostr?obj:str},copyDataAttributes:function(from,to,noprefix,nohyphen){var attr=socialite.getDataAttributes(from,noprefix,!0);for(var i in attr)to.setAttribute(nohyphen?i.replace(/-/g,"_"):i,attr[i])},createIframe:function(src,instance){var iframe=document.createElement("iframe");return iframe.style.cssText="overflow: hidden; border: none;",socialite.extendObject(iframe,{src:src,allowtransparency:"true",frameborder:"0",scrolling:"no"},!0),instance&&(iframe.onload=iframe.onreadystatechange=function(){rstate.test(iframe.readyState||"")&&(iframe.onload=iframe.onreadystatechange=null,socialite.activateInstance(instance))}),iframe},networkReady:function(name){return networks[name]?networks[name].loaded:undefined},appendNetwork:function(network){if(network&&!network.appended){if("function"==typeof network.append&&network.append(network)===!1)return network.appended=network.loaded=!0,void socialite.activateAll(network);network.script&&(network.el=document.createElement("script"),socialite.extendObject(network.el,network.script,!0),network.el.async=!0,network.el.onload=network.el.onreadystatechange=function(){if(rstate.test(network.el.readyState||"")){if(network.el.onload=network.el.onreadystatechange=null,network.loaded=!0,"function"==typeof network.onload&&network.onload(network)===!1)return;socialite.activateAll(network)}},document.body.appendChild(network.el)),network.appended=!0}},removeNetwork:function(network){return socialite.networkReady(network.name)?(network.el.parentNode&&network.el.parentNode.removeChild(network.el),!(network.appended=network.loaded=!1)):!1},reloadNetwork:function(name){var network=networks[name];network&&socialite.removeNetwork(network)&&socialite.appendNetwork(network)},createInstance:function(el,widget){var proceed=!0,instance={el:el,uid:uid++,widget:widget};return instances.push(instance),widget.process!==undefined&&(proceed="function"==typeof widget.process?widget.process(instance):!1),proceed&&socialite.processInstance(instance),instance.el.setAttribute("data-socialite",instance.uid),instance.el.className="socialite "+widget.name+" socialite-instance",instance},processInstance:function(instance){var el=instance.el;instance.el=document.createElement("div"),instance.el.className=el.className,socialite.copyDataAttributes(el,instance.el),"a"!==el.nodeName.toLowerCase()||el.getAttribute("data-default-href")||instance.el.setAttribute("data-default-href",el.getAttribute("href"));var parent=el.parentNode;parent.insertBefore(instance.el,el),parent.removeChild(el)},activateInstance:function(instance){return instance&&!instance.loaded?(instance.loaded=!0,"function"==typeof instance.widget.activate&&instance.widget.activate(instance),socialite.addClass(instance.el,"socialite-loaded"),instance.onload?instance.onload(instance.el):null):void 0},activateAll:function(network){"string"==typeof network&&(network=networks[network]);for(var i=0;i<instances.length;i++){var instance=instances[i];instance.init&&instance.widget.network===network&&socialite.activateInstance(instance)}},load:function(context,el,w,onload,process){if(context=context&&"object"==typeof context&&1===context.nodeType?context:document,!el||"object"!=typeof el)return void socialite.load(context,socialite.getElements(context,"socialite"),w,onload,process);var i;if(/Array/.test(Object.prototype.toString.call(el)))for(i=0;i<el.length;i++)socialite.load(context,el[i],w,onload,process);else if(1===el.nodeType){if(!w||!widgets[w]){w=null;var classes=el.className.split(" ");for(i=0;i<classes.length;i++)if(widgets[classes[i]]){w=classes[i];break}if(!w)return}var instance,widget=widgets[w],sid=parseInt(el.getAttribute("data-socialite"),10);if(isNaN(sid))instance=socialite.createInstance(el,widget);else for(i=0;i<instances.length;i++)if(instances[i].uid===sid){instance=instances[i];break}!process&&instance&&(instance.init||(instance.init=!0,instance.onload="function"==typeof onload?onload:null,widget.init(instance)),widget.network.appended?socialite.networkReady(widget.network.name)&&socialite.activateInstance(instance):socialite.appendNetwork(widget.network))}},activate:function(el,w,onload){window.Socialite.load(null,el,w,onload)},process:function(context,el,w){window.Socialite.load(context,el,w,null,!0)},network:function(n,params){networks[n]={name:n,el:null,appended:!1,loaded:!1,widgets:{}},params&&socialite.extendObject(networks[n],params)},widget:function(n,w,params){params.name=n+"-"+w,networks[n]&&!widgets[params.name]&&(params.network=networks[n],networks[n].widgets[w]=widgets[params.name]=params)},setup:function(params){socialite.extendObject(socialite.settings,params,!0)}};return socialite}(window,window.document),function(window,document,Socialite){Socialite.setup({facebook:{lang:"en_US",appId:null},twitter:{lang:"en"},googleplus:{lang:"en-US"}}),Socialite.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(network){var fb=document.createElement("div"),settings=Socialite.settings.facebook,events={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send"};fb.id="fb-root",document.body.appendChild(fb),network.script.src=network.script.src.replace("{{language}}",settings.lang),window.fbAsyncInit=function(){window.FB.init({appId:settings.appId,xfbml:!0,status:!0,cookie:!0});for(var e in events)"function"==typeof settings[e]&&window.FB.Event.subscribe(events[e],settings[e])}}}),Socialite.widget("facebook","like",{init:function(instance){var el=document.createElement("div");el.className="fb-like",Socialite.copyDataAttributes(instance.el,el),instance.el.appendChild(el),window.FB&&window.FB.XFBML&&window.FB.XFBML.parse(instance.el)}}),Socialite.widget("facebook","intent",{init:function(){}}),Socialite.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var notwttr="object"!=typeof window.twttr,settings=Socialite.settings.twitter,events=["click","tweet","retweet","favorite","follow"];return notwttr&&(window.twttr=t={_e:[],ready:function(f){t._e.push(f)}}),window.twttr.ready(function(twttr){for(var i=0;i<events.length;i++){var e=events[i];"function"==typeof settings["on"+e]&&twttr.events.bind(e,settings["on"+e])}Socialite.activateAll("twitter")}),notwttr}});var twitterInit=function(instance){var el=document.createElement("a");el.className=instance.widget.name+"-button",Socialite.copyDataAttributes(instance.el,el),el.setAttribute("href",instance.el.getAttribute("data-default-href")),el.setAttribute("data-lang",instance.el.getAttribute("data-lang")||Socialite.settings.twitter.lang),instance.el.appendChild(el)},twitterActivate=function(){window.twttr&&"object"==typeof window.twttr.widgets&&"function"==typeof window.twttr.widgets.load&&window.twttr.widgets.load()};Socialite.widget("twitter","share",{init:twitterInit,activate:twitterActivate}),Socialite.widget("twitter","embed",{process:function(instance){instance.innerEl=instance.el,instance.innerEl.getAttribute("data-lang")||instance.innerEl.setAttribute("data-lang",Socialite.settings.twitter.lang),instance.el=document.createElement("div"),instance.el.className=instance.innerEl.className,instance.innerEl.className="",instance.innerEl.parentNode.insertBefore(instance.el,instance.innerEl),instance.el.appendChild(instance.innerEl)},init:function(instance){instance.innerEl.className="twitter-tweet"},activate:twitterActivate}),Socialite.widget("twitter","intent",{init:function(){}}),Socialite.network("googleplus",{script:{src:"//apis.google.com/js/plusone.js"},append:function(){return window.gapi?!1:void(window.___gcfg={lang:Socialite.settings.googleplus.lang,parsetags:"explicit"})}});var googleplusInit=function(instance){var el=document.createElement("div");el.className="g-"+instance.widget.gtype,Socialite.copyDataAttributes(instance.el,el),instance.el.appendChild(el),instance.gplusEl=el},googleplusEvent=function(instance,callback){return"function"!=typeof callback?null:function(data){callback(instance.el,data)}},googleplusActivate=function(instance){var type=instance.widget.gtype;if(window.gapi&&window.gapi[type]){for(var settings=Socialite.settings.googleplus,params=Socialite.getDataAttributes(instance.el,!0,!0),events=["onstartinteraction","onendinteraction","callback"],i=0;i<events.length;i++)params[events[i]]=googleplusEvent(instance,settings[events[i]]);window.gapi[type].render(instance.gplusEl,params)}};Socialite.widget("googleplus","one",{init:googleplusInit,activate:googleplusActivate,gtype:"plusone"}),Socialite.widget("googleplus","intent",{init:function(){}}),Socialite.network("linkedin",{script:{src:"//platform.linkedin.com/in.js"}});var linkedinInit=function(instance){var el=document.createElement("script");el.type="IN/"+instance.widget.intype,Socialite.copyDataAttributes(instance.el,el),instance.el.appendChild(el),"object"==typeof window.IN&&"function"==typeof window.IN.parse&&(window.IN.parse(instance.el),Socialite.activateInstance(instance))};Socialite.widget("linkedin","share",{init:linkedinInit,intype:"Share"}),Socialite.widget("linkedin","intent",{init:function(){}})}(window,window.document,window.Socialite),function(){var s=window._socialite;if(/Array/.test(Object.prototype.toString.call(s)))for(var i=0,len=s.length;len>i;i++)"function"==typeof s[i]&&s[i]()}(),function($,window,document){var $this,methods={init:function(options,setopts){return this.hasClass("socialclimber")?this.SocialClimber("update",options):(this.SocialClimber("add",options),this.SocialClimber("load",setopts),this)},add:function(settings){return this.each(function(){var insert;switch($this=$(this),settings=$.extend({},defaults,settings||{}),settings.optional=$.extend({},defaults.optional,settings.optional||{}),getFBAppID(),settings.style&&$this.addClass("sc-"+settings.style.split(" ").join(" sc-")),settings.type){case"hover":$this.addClass("sc-hovers socialclimber"),insert=makeHovers(settings);break;case"count":$this.addClass("sc-counts socialclimber"),insert=makeCounts(settings,"count");break;case"nocount":$this.addClass("sc-counts sc-nocount socialclimber"),insert=makeCounts(settings,"nocount");break;case"button":$this.addClass("sc-buttons socialclimber"),insert=makeButtons(settings)}$this.empty().html(insert),"button"===settings.type&&bindFB($this.find(".sc-facebook.sc-shareicon"),settings),$this.find(".sc-countBox").hide(),$this.find(".sc-facebook .sc-countBox").fadeTo(0,0)})},setup:function(options){return"undefined"==typeof options||"undefined"==typeof options.facebook?$.extend(options,{facebook:{appId:getFBAppID()}}):options.facebook.appId=options.facebook.appId||getFBAppID(),$("body").data("socialclimber",options),this},load:function(options){return $("body").data("socialclimber")||(options=options||{},methods.setup(options)),setupInstance(),this.each(function(){Socialite.load($(this))}),setDOM(this),this},update:function(settings){var _this=this.hasClass("socialclimber")?this:this.find(".socialclimber");return settings=$.extend({},defaults,settings||{}),settings.optional=$.extend({},defaults.optional,settings.optional||{}),_this.each(function(){$this=$(this),$this.hasClass("sc-hovers")?(settings.type="hover",updateHoversCounts(settings),_this.SocialClimber("load")):$this.hasClass("sc-counts")?(settings.type=$this.hasClass("sc-nocount")?"nocount":"count",updateHoversCounts(settings),_this.SocialClimber("load")):$this.hasClass("sc-buttons")&&updateButtons(settings)})},destroy:function(){return $this=this.hasClass("socialclimber")?this:this.find(".socialclimber"),$this.find(".sc-shareicon").addBack().off("mouseenter mouseleave mouseover click"),$this.find(".sc-permalink input").off("mouseenter mouseleave click"),$this.empty(),$this.removeClass("socialclimber sc-hovers sc-counts sc-buttons sc-bottom sc-left sc-grey sc-med"),$this},destroyAll:function(){return $(".socialclimber").SocialClimber("destroy"),$("#socialclimber-intents").remove(),$("body").removeData("socialclimber"),this}},setupInstance=function(){Socialite.setup($("body").data("socialclimber"))},getFBAppID=function(){switch(window.location.hostname){case"localhost":return 0x6b84cbbfe18a;case"graphicsdev.dowjones.net":return 363579230418270;case"graphics.wsj.com":case"graphicsweb.wsj.com":case"projects.wsj.com":return 0x817ef59374d2;case"projects.marketwatch.com":return 457522827660494}},checkIE=function(){return $("html").hasClass("ie7")||$("html").hasClass("ie6")},makeHovers=function(settings){var html="",setInstance=resolveFunctions(settings);return $.each(settings.share,function(i,network){if("googleplus"===network&&checkIE())return!0;var url=buildSocialite(network,setInstance);html+=hoverTemplate(network,url)}),html},makeCounts=function(settings){var html="",setInstance=resolveFunctions(settings);return $.each(settings.share,function(i,network){var url=buildSocialite(network,setInstance);html+="permalink"===network?hoverTemplate(network,url):"<div class='sc-"+network+"'>"+url+"</div>\n"}),html},makeButtons=function(settings){var html="",setInstance=resolveFunctions(settings,!0);return $.each(settings.share,function(i,network){if("permalink"===network){setInstance.url=decodeURIComponent(setInstance.url);var url=buildSocialite(network,setInstance);html+=hoverTemplate(network,url)}else{var url=buildIntent(network,setInstance);html+=url+"\n"}}),html},updateHoversCounts=function(settings){var setInstance=resolveFunctions(settings);return $this.children().each(function(){if($(this).hasClass("sc-permalink"))$(this).find("input").val(setInstance.url);else{var network=$(this).attr("class").split(" ")[0].substr(3),url=buildSocialite(network,setInstance);$(this).find(".socialite").replaceWith(url)}}),this},updateButtons=function(settings){var setInstance=resolveFunctions(settings,!0);return $this.children().each(function(){if($(this).hasClass("sc-permalink"))setInstance.url=decodeURIComponent(setInstance.url),$(this).find("input").val(setInstance.url);else{var network=$(this).attr("class").split(" ")[0].substr(3),url=buildURL(networks["sc-"+network].intent,network,setInstance);$(this).replaceWith(url),"facebook"===network&&bindFB($this.find(".sc-facebook.sc-shareicon"),settings)}}),this},isFunction=function(obj,encode){return encode?encodeURIComponent("function"==typeof obj?obj.call($this):obj):"function"==typeof obj?obj.call($this):obj},resolveFunctions=function(settings,encode){var resolveOptions={};return $.each(settings.optional,function(network,options){var opt=$.map(options,function(val,key){return encode?key+"="+isFunction(val,encode):"data-"+key+"='"+isFunction(val)+"'"});resolveOptions[network]=opt.join(encode?"&":" ")}),$.extend({},settings,{url:isFunction(settings.url,encode),text:isFunction(settings.text,encode),optional:resolveOptions})},hoverTemplate=function(network,url){return"<div class='sc-"+network+" sc-shareicon'>\n<div class='sc-countBox'>\n"+url+"\n<div class='sc-countBoxBridge'></div>\n<div class='sc-countBoxNub'>\n<s></s>\n<i></i>\n</div>\n</div>\n</div>\n"},buildSocialite=function(network,settings){var baseurl=networks["sc-"+network].url,type=networks["sc-"+network][settings.type];return baseurl=baseurl.replace("{{type}}",type),buildURL(baseurl,network,settings)},buildIntent=function(network,settings){return buildIntentScripts(network),buildURL(networks["sc-"+network].intent,network,settings)},buildURL=function(baseurl,network,settings){return baseurl=baseurl.replace("{{url}}",settings.url).replace("{{text}}",settings.text),baseurl=settings.optional[network]?baseurl.replace("{{optional}}",settings.optional[network]):baseurl.replace("{{optional}}","")},buildIntentScripts=function(network){$("body #socialclimber-intents").length||$("body").append('<div id="socialclimber-intents"></div>'),$("#socialclimber-intents ."+network+"-intent").length||$("#socialclimber-intents").append('<span class="'+network+'-intent socialite"></span>')},resolveFB=function(settings){var resolveOptions={};return $.each(settings.optional.facebook,function(key,val){resolveOptions[key]=val}),$.extend({},settings,{url:isFunction(settings.url),text:isFunction(settings.text),optional:{facebook:resolveOptions}})},bindFB=function(el,settings){var setInstance=resolveFB(settings);el.on("click",function(e){e.preventDefault(),FB.ui({method:"feed",link:setInstance.url,name:setInstance.optional.facebook.name?isFunction(setInstance.optional.facebook.name):setInstance.text,caption:setInstance.optional.facebook.caption,description:isFunction(setInstance.optional.facebook.desc),picture:isFunction(setInstance.optional.facebook.picture)})})},bindHover=function(el,div){el.children(div).on("mouseenter",function(){$(this).find(".sc-countBox").show(),$(this).hasClass("sc-facebook")&&$(this).find(".sc-countBox").css("visibility","visible"),$(this).hasClass("sc-permalink")&&$(this).find("input").select()}).on("mouseleave",function(){$(this).find(".sc-countBox").hide(),$(this).hasClass("sc-facebook")&&$(this).find(".sc-countBox").css("visibility","hidden")}),el.children("div").one("mouseover",function(){el.find(".sc-facebook .sc-countBox").fadeTo(0,1).hide(),$(this).find(".sc-countBox").show()}),el.find(".sc-permalink input").on("click",function(){this.select()})},bindPopup=function(el,div){el.on("click",div,function(e){e.preventDefault(),popupWindow=window.open($(this).parent().attr("href"),"popUpWindow","width=600,height=405,left=10,top=10,resizable=yes,scrollbars=no,toolbar=yes,menubar=no,location=no,directories=no,status=yes")})},bindGrey=function(el,div){el.on("mouseenter",div,function(){$(this).addClass("sc-color")}).on("mouseleave",div,function(){$(this).removeClass("sc-color")})},setDOM=function(el){el.find(".sc-shareicon").css("cursor","pointer"),el.hasClass("socialclimber")?(el.hasClass("sc-hovers")?bindHover(el,"div"):el.hasClass("sc-buttons")&&(bindPopup(el.find(".sc-googleplus.sc-shareicon")),bindPopup(el.find(".sc-linkedin.sc-shareicon"))),el.hasClass("sc-grey")&&bindGrey(el,".sc-shareicon"),bindHover(el,"div.sc-permalink")):(bindHover(el.find(".sc-hovers"),"div"),bindPopup(el,".sc-buttons .sc-googleplus.sc-shareicon"),bindPopup(el,".sc-buttons .sc-linkedin.sc-shareicon"),bindHover(el.find(".socialclimber"),"div.sc-permalink"),bindGrey(el,".sc-grey .sc-shareicon"))},defaults={share:["twitter","facebook"],type:"hover",style:"",url:window.location.href,text:document.title,optional:{twitter:{related:"marketwatch",via:"marketwatch"},facebook:{title:document.title}}},networks={"sc-twitter":{url:'<a href="//twitter.com/share" class="socialite twitter-share" data-text="{{text}}" data-url="{{url}}" data-count="{{type}}" {{optional}} rel="nofollow" target="_blank"></a>',intent:'<a class="sc-twitter" href="//twitter.com/intent/tweet?&url={{url}}&text={{text}}&{{optional}}"><div class="sc-twitter sc-shareicon" title="Send a Tweet"></div></a>',hover:"vertical",count:"horizontal",nocount:"none",optional:""},"sc-facebook":{url:'<a href="//www.facebook.com/plugins/like.php" class="socialite facebook-like" data-href="{{url}}" data-send="false" data-layout="{{type}}" data-width="60" data-show-faces="false" {{optional}} rel="nofollow" target="_blank"></a>',intent:'<div class="sc-facebook sc-shareicon" title="Post to Facebook"></div>',hover:"box_count",count:"button_count",nocount:"standard",optional:""},"sc-linkedin":{url:'<a href="#" class="socialite linkedin-share" data-url="{{url}}" data-counter="{{type}}" {{optional}} rel="nofollow" target="_blank"></a>',intent:'<a class="sc-linkedin" href="//www.linkedin.com/shareArticle?mini=true&url={{url}}&summary={{text}}&{{optional}}"><div class="sc-linkedin sc-shareicon" title="Share on LinkedIn"></div></a>',hover:"top",count:"right",nocount:"",optional:""},"sc-googleplus":{url:'<a href="#" class="socialite googleplus-one" data-size="{{type}}" data-href="{{url}}" {{optional}} rel="nofollow" target="_blank"></a>',intent:'<a class="sc-googleplus" href="//plus.google.com/share?&url={{url}}&{{optional}}"><div class="sc-googleplus sc-shareicon" title="Share on Google+"></div></a>',hover:"tall",count:"medium",nocount:'medium" data-annotation="none',optional:""},"sc-permalink":{url:'<label>Copy link:</label><input type="text" value="{{url}}">',hover:"tall",count:"medium",nocount:"",optional:""}};$.fn.SocialClimber=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.SocialClimber"):methods.init.apply(this,arguments)}}(jQuery,window,document);